<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Widukind search</title>	

    <!--	<link href='http://fonts.googleapis.com/css?family=Sintony:400,700' rel='stylesheet' type='text/css'>
      -->
    <link type='text/css' href='static/style.css' rel='stylesheet'>
  </head>  

  <body>
    <div id="banner">
      <h1>Widukind search</h1>
      <p class="lead">A database of international
	macroeconomic data</p>
      <div id="menu">
	<nav>
	  <ul>
	    <li><a href={{ url_for('search_datasets') }}>Datasets</a></li>
	    <li><a href={{ url_for('search_series') }}>Series</a></li>
	  </ul>
	</nav>
      </div>

      <div id="searchform">
	<form action="/search_datasets" method="post">
	  {% if not session.query %}
	  <input type="text" name="query" style="width:90%"></input>
	  {% else %}
	  <input type="text" name="query"
		 value="{{ session.query }}" style="width:90%"></input>
	  {% endif %}  
	  <input type="submit" value="Go"></input>
	</form>
      </div>
    </div>

    <div id="main-outer">
      <div id="main-inner-3">
	<div id="main-inner-2">
	  <div id="main-inner-1">

	  <div id="facets1-2">
	    {% include 'facet1.html' %}
	  </div>

	  <div id="results-2">
	    {% if session.results %}
	      <table>
		{% for r in session.results %}
		<tr>
		  <th> {{ r['datasetCode'] }} </th>
		  <td>
		    <form action="/search_series_in_dataset"
			  method="post">
		      <input type="hidden" name="datasetCode"
			     value="{{ r['datasetCode'] }}">
		      <input type="submit" value="{{ r['name'] }}">
		    </form>
		  </td>
		</tr>
		{% endfor %}
	      </table>
	    {% endif %}
	  </div>

	  <div id="facets2"></div>
	</div>
      </div>
    </div>
    <script language="javascript" type="text/javascript" src="../static/jquery-2.1.3.min.js"></script>

    <script type="text/javascript">
      jQuery(document).ready(function ($) {
      $('.accord ul li:has(ul)').addClass('expand').find('ul').hide();
      $('.accord ul li.expand>a').before('<span>[ + ]</span>');

      $('.accord ul').on('click', 'li.collapse span ', function (e) {
      $(this).text('[ + ]').parent().addClass('expand').removeClass('collapse').find('>ul').slideUp();
      e.stopImmediatePropagation();
      });

      $('.accord ul').on('click', 'li.expand span', function (e) {
      $(this).text('[ - ]').parent().addClass('collapse').removeClass('expand').find('>ul').slideDown();
      e.stopImmediatePropagation();
      });

      $('.accord ul').on('click', 'li.collapse li:not(.collapse)', function (e) {
      e.stopImmediatePropagation();
      });		
      });
    </script>	
  </body>
</html>
