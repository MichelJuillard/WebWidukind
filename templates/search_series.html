<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Widukind search</title>	

<!--	<link href='http://fonts.googleapis.com/css?family=Sintony:400,700' rel='stylesheet' type='text/css'>
-->
	<link type='text/css' href='static/style.css' rel='stylesheet'>
</head>  

<body>
  <div id="banner">
    <h1>Widukind search</h1>
    <p class="lead">A database of international
      macroeconomic data</p>
  </div>
  <div id="facets1">
    <form action="/facet1" method="post">
      <div id="Accord" class="accord">
	<ul>
	  <li><a href="#">Providers</a>
	    <ul class="sub">
	      <li><a href="#">Eurostat<input type="checkbox" name="provider" value="Eurostat"></a></li>
 	      <li><a href="#">Insee<input type="checkbox" name="provider" value="Insee"></a></li>
	    </ul>
	  </li>
	</ul>
      </div>
      <input type="submit" value="Update">
    </form>
  </div>

  <div id=center>

    <div id="searchform">
      <form action="/search_series" method="post">
	{% if not session.query %}
	<input type="text" name="query" style="width:90%"></input>
	{% else %}
	<input type="text" name="query"
	       value="{{ session.query }}" style="width:90%"></input>
	{% endif %}  
	<input type="submit" value="Go"></input>
      </form>
    </div>
    <div id="results">
      {% if session.results %}
	<table>
	  {% for r in session.results %}
	  <tr>
	    <th> {{ r['key'] }} </th>
	    <td> {{ r['name'] }} </td>
	    <td> <a href="/print_series?{{r['key']}}"
		    target="_blank">
		<button type="button">P</button></a></td>
	    <td> <a href="/plot_series?{{r['key']}}"
		    target="_blank">
		<button type="button">G</button></a></td>
	    <td> <form method="POST"
		       action="/download_series?{{r['key']}}">
		<button type="submit">D</button>
		</form>
	  </tr>
	  {% endfor %}
	</table>
      {% endif %}
    </div>
  </div>
  <div id="facets2"></div>
	<script language="javascript" type="text/javascript" src="../static/jquery-2.1.3.min.js"></script>

	<script type="text/javascript">
	  jQuery(document).ready(function ($) {
	  $('.accord ul li:has(ul)').addClass('expand').find('ul').hide();
	  $('.accord ul li.expand>a').before('<span>[ + ]</span>');

	  $('.accord ul').on('click', 'li.collapse span ', function (e) {
	  $(this).text('[ + ]').parent().addClass('expand').removeClass('collapse').find('>ul').slideUp();
	  e.stopImmediatePropagation();
	  });

	  $('.accord ul').on('click', 'li.expand span', function (e) {
	  $(this).text('[ - ]').parent().addClass('collapse').removeClass('expand').find('>ul').slideDown();
	  e.stopImmediatePropagation();
	  });

	  $('.accord ul').on('click', 'li.collapse li:not(.collapse)', function (e) {
	  e.stopImmediatePropagation();
	  });		
	  });
	</script>	
</body>
</html>
